<!DOCTYPE html>

<html lang="en" dir="ltr">

<head>

    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">
    <link rel="stylesheet" href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css'> 
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <!-- Boxicons CDN Link -->
    <link href="https://unpkg.com/boxicons@2.0.7/css/boxicons.min.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css">

    <title>ICV Report</title>

  </head>

  <body style="background-color: #fff;">
<br>
  <h3 class="text-center">Company Level Form Summary</h3>
 
  <br>

  <h3 id="myId" name="myId" style="display: none; text-align: center;"></h3>

  <script>

    //To get the date and month
  var currentTime = new Date()
  var month = currentTime.getMonth() + 1
  var day = currentTime.getDate()
  var year = currentTime.getFullYear()

  if(day <= 22 && month == 4)
  {
     // document.write ("Date " +day + " Month " +month);
      document.getElementById("myId").style.display = 'block';
      //var title = document.createElement("h3");
      //title.setAttribute = ("id", "Q01")
      var text = document.createTextNode("Quarter 1");
      //title.appendChild(text);
      document.getElementById("myId").appendChild(text);
  }

     else if(day <= 22 && month == 7) {
     //document.write ("Date " +day + " Month " +month);
      document.getElementById("myId").style.display = 'block';
      //var title = document.createElement("h3");
      //title.setAttribute = ("id", "Q02")
      var text = document.createTextNode("Quarter 2");
      //title.appendChild(text);
     document.getElementById("myId").appendChild(text);
  }

  else if(day <= 22 && month == 10) {
    //document.write ("Date " +day + " Month " +month);
      document.getElementById("myId").style.display = 'block';
      //var title = document.createElement("h3");
      //title.setAttribute = ("id", "Q03")
      var text = document.createTextNode("Quarter 3");
      //title.appendChild(text);
      document.getElementById("myId").appendChild(text);
  }

  else if(day <= 22 && month == 1) {
   // document.write ("Date " +day + " Month " +month);
      document.getElementById("myId").style.display = 'block';
      //var title = document.createElement("h3");
      //title.setAttribute = ("id", "Q04")
      var text = document.createTextNode("Quarter 4");
      //element.appendChild(text);
      document.getElementById("myId").appendChild(text);
  }

  else {
    //document.write ("Year " +year);
    document.getElementById("myId").style.display = 'block';
    var text = document.createTextNode("No Active Quarter");
      //element.appendChild(text);
      document.getElementById("myId").appendChild(text);
  }

  </script>

  <div class="container">
    <%- include ("./alerts/messages"); %>
    <br>
    <h4>Work Force Break Down</h4>
    <div class="table-responsive">
  <table class="table table-bordered" id="content_table">
    <thead>
      <tr>
        <th scope="col">Category</th>
        <th scope="col">Position</th>
        <th scope="col">Local</th>
        <th scope="col">Non-Local</th>
        <th scope="col">SAWP</th>
        <th scope="col">Total</th>
        <th scope="col">%Local</th>
        <th scope="col" class="text-end">Action</th>
      </tr>
    </thead>

    <tbody>
      <% workList.forEach(work => {%>  
      <tr>
        <td><%= work.category%></td>
        <td><%= work.position%></td>
        <td><%= work.local%></td>
        <td><%= work.nonlocal%></td>
        <td><%= work.sawp%></td>
        <td><%= work.total%></td>
        <td><%= work.localpct%></td>
        <td class="text-end">

        <div class="d-flex flex-row justify-content-end gap-1">
  
        <a href="/workforce/editworkforce/<%= work._id %>" type="button" class="btn btn-warning btn-small">
                  <i class="bi bi-pencil"></i>
                </a>

                <a href="/workforce/delete/<%= work._id %>" type="button" class="btn btn-danger btn-small" onclick="myFunction()">
                  <i class="bi bi-person-x"></i>
              </a>
              <script>
                function myFunction() {
                  alert("The selected data will be deleted");
                }
                </script>
                
              </div>
            </td>

          </tr>
        <% }) %>
      </tbody>
    </table>
  </div>

    <br><br>
    <h4>Local Recruitment</h4>
  <div class="table-responsive">
    <table class="table table-bordered" id="content_table">
      <thead>
        <tr>
          <tr>
            <th style="width: 30%">Category</th>
            <th style="width: 50%">Code</th>
            <th>Experienced Hire</th>
            <th>Staff rollover</th>
            <th>Graduates</th>
            <th>HND</th>
            <th>BMA</th>
            <th>ADC</th>
            <th>IBTE</th>
            <th>School Leavers</th>
            <th>Total</th>
          <th class="text-end">Action</th>
        </tr>
      </thead>
  
      <tbody>
        <% localList.forEach(locrecruit => {%>  
        <tr>
          <td><%= locrecruit.category%></td>
          <td><%= locrecruit.code%></td>
          <td><%= locrecruit.exphire%></td>
          <td><%= locrecruit.rollover%></td>
          <td><%= locrecruit.grads%></td>
          <td><%= locrecruit.hnd%></td>
          <td><%= locrecruit.bma%></td>
          <td><%= locrecruit.adc%></td>
          <td><%= locrecruit.ibte%></td>
          <td><%= locrecruit.schleavers%></td>
          <td><%= locrecruit.total%></td>
          <td class="text-end">
  
          <div class="d-flex flex-row justify-content-end gap-1">
    
                  <a href="/localrecruit/editlocal/<%= locrecruit._id %>" type="button" class="btn btn-warning btn-small">
                    <i class="bi bi-pencil"></i>
                  </a>
    
                  
                  <a href="/localrecruit/deletelocal/<%= locrecruit._id %>" type="button" class="btn btn-danger btn-small" onclick="myFunction()">
                    <i class="bi bi-person-x"></i>
                </a>
                <script>
                  function myFunction() {
                    alert("The selected data will be deleted");
                  }
                  </script>
          </div>
    
              </td>
            </tr>
          <% }) %>
        </tbody>
      </table>
    </div>
    <br><br>
    <h4>Non-Local Recruitment</h4>
  <div class="table-responsive">
    <table class="table table-bordered" id="content_table">
      <thead>
        <tr>
          <tr>
            <th style="width: 30%">Category</th>
            <th style="width: 50%">Code</th>
            <th>Experienced Hire</th>
            <th>Staff rollover</th>
            <th>Graduates</th>
            <th>HND</th>
            <th>BMA</th>
            <th>ADC</th>
            <th>IBTE</th>
            <th>School Leavers</th>
            <th>Total</th>
          <th class="text-end">Action</th>
        </tr>
      </thead>
  
      <tbody>
        <% nonlocalList.forEach(nonrecruit => {%>  
        <tr>
          <td><%= nonrecruit.category%></td>
          <td><%= nonrecruit.code%></td>
          <td><%= nonrecruit.exphire%></td>
          <td><%= nonrecruit.rollover%></td>
          <td><%= nonrecruit.grads%></td>
          <td><%= nonrecruit.hnd%></td>
          <td><%= nonrecruit.bma%></td>
          <td><%= nonrecruit.adc%></td>
          <td><%= nonrecruit.ibte%></td>
          <td><%= nonrecruit.schleavers%></td>
          <td><%= nonrecruit.total%></td>
          <td class="text-end">
  
          <div class="d-flex flex-row justify-content-end gap-1">
    
                  <a href="/nonlocalrecruit/editnonlocal/<%= nonrecruit._id %>" type="button" class="btn btn-warning btn-small">
                    <i class="bi bi-pencil"></i>
                  </a>
    
                  
                  <a href="/nonlocalrecruit/deletenonlocal/<%= nonrecruit._id %>" type="button" class="btn btn-danger btn-small" onclick="myFunction()">
                    <i class="bi bi-person-x"></i>
                </a>
                <script>
                  function myFunction() {
                    alert("The selected data will be deleted");
                  }
                  </script>

                </div>
    
    
              </td>
            </tr>
          <% }) %>
        </tbody>
      </table>
    </div>
    <br><br>
    <h4>Leavers</h4>
      <div class="table-responsive">
        <table class="table table-bordered" id="content_table">
          <thead>
            <tr>
              <tr>
                <th scope="col">Category</th>
                <th scope="col">Resign</th>
                <th scope="col">Terminate</th>
                <th scope="col">Transfer</th>
                <th scope="col">Others</th>
                <th scope="col">Total</th>
              <th scope="col" class="text-end">Action</th>
            </tr>
          </thead>
      
          <tbody>
            <% leaveList.forEach(leave => {%>  
            <tr>
              <td><%= leave.category%></td>
              <td><%= leave.resign%></td>
              <td><%= leave.terminate%></td>
              <td><%= leave.transfer%></td>
              <td><%= leave.others%></td>
              <td><%= leave.total%></td>
              <td class="text-end">
      
              <div class="d-flex flex-row justify-content-end gap-1">
        
                      <a href="/leaver/editleaver/<%= leave._id %>" type="button" class="btn btn-warning btn-small">
                        <i class="bi bi-pencil"></i>
                      </a>
        
                      <a href="/leaver/deleteleaver/<%= leave._id %>" type="button" class="btn btn-danger btn-small" onclick="myFunction()">
                        <i class="bi bi-person-x"></i>
                    </a>
                    <script>
                      function myFunction() {
                        alert("The selected data will be deleted");
                      }
                      </script>
        
                    </div>
        
        
                  </td>
                </tr>
              <% }) %>
            </tbody>
          </table>
        </div>
        <br><br>
        <h4>Content Break Down</h4>
          <div class="table-responsive">
            <table class="table table-bordered table-sm" id="content_table">
              <thead>
                <tr>
                  <tr>
                    <th>Category</th>
                    <th>Code</th>
                    <th style="width:30%">Spend in Brunei (BND $)</th>
                    <th style="width:70%">Spend out of Brunei (BND $)</th>
                    <th>Total (BND $)</th>
                    <th>% Spend in Brunei</th>
                  <th scope="col" class="text-end">Action</th>
                </tr>
              </thead>
          
              <tbody>
                <% spendList.forEach(spend => {%>  
                <tr>
                  <td><%= spend.category%></td>
                  <td><%= spend.code%></td>
                  <td><%= spend.inbrunei%></td>
                  <td><%= spend.outbrunei%></td>
                  <td><%= spend.total%></td>
                  <td><%= spend.spendpct%></td>
                  <td class="text-end">
          
                  <div class="d-flex flex-row justify-content-end gap-1">
            
                          <a href="/spend/editspend/<%= spend._id %>" type="button" class="btn btn-warning btn-small">
                            <i class="bi bi-pencil"></i>
                          </a>
            
                          <a href="/spend/deletespend/<%= spend._id %>" type="button" class="btn btn-danger btn-small" onclick="myFunction()">
                            <i class="bi bi-person-x"></i>
                        </a>
                        <script>
                          function myFunction() {
                            alert("The selected data will be deleted");
                          }
                          </script>
            
                        </div>
            
            
                      </td>
                    </tr>
                  <% }) %>
                </tbody>
              </table>
            </div>

            <br><br>
<h4>Apprenticeship Program</h4>
  <div class="table-responsive">
    <table class="table table-bordered table-sm" id="content_table">
      <thead>
        <tr>
          <tr>
            <th scope="col">Name</th>
            <th scope="col">IC Number</th>
            <th scope="col">I-Ready</th>
            <th scope="col">Duration</th>
            <th scope="col">Start Date</th>
            <th scope="col">End Date</th>
            <th scope="col">Qualification</th>
            <th scope="col">Skills/Trade</th>
            <th scope="col">Accreditation</th>
          <th scope="col" class="text-end">Action</th>
        </tr>
      </thead>
  
      <tbody>
        <% appList.forEach(apprentice => {%>  
        <tr>
          <td><%= apprentice.fullname%></td>
          <td><%= apprentice.ic%></td>
          <td><%= apprentice.iready%></td>
          <td><%= apprentice.duration%></td>
          <td><%= apprentice.start%></td>
          <td><%= apprentice.end%></td>
          <td><%= apprentice.qualification%></td>
          <td><%= apprentice.skilltrade%></td>
          <td><%= apprentice.accreditation%></td>
          <td class="text-end">
  
          <div class="d-flex flex-row justify-content-end gap-1">
    
                  <a href="/apprentice/editapprentice/<%= apprentice._id %>" type="button" class="btn btn-warning btn-small">
                    <i class="bi bi-pencil"></i>
                  </a>
    
                  <a href="/apprentice/deleteapprentice/<%= apprentice._id %>" type="button" class="btn btn-danger btn-small" onclick="myFunction()">
                    <i class="bi bi-person-x"></i>
                </a>
                <script>
                  function myFunction() {
                    alert("The selected data will be deleted");
                  }
                  </script>
    
                </div>
    
    
              </td>
            </tr>
          <% }) %>
        </tbody>
      </table>
    </div>
    <br>
    <p style="font-size: 15px; font-weight: bold;"><input type="checkbox" id="checkme"> I acknowledge the above informations are correct and updated.</p>
    <form action="/users/comp_summary" method="POST">
      <button type="submit" class="btn btn-danger btn-lg" id="sendNewSms" disabled onclick="myFunc()">Submit Form</button>
      </form>
    <div class="text-right">
    <a href="/vendor_dashboard" class="btn btn-lg" style="font-size: large;" id="signbutton">Back To Dashboard</a>
  </div>
   
  <script>
    var checker = document.getElementById('checkme');
 var sendbtn = document.getElementById('sendNewSms');
 // when unchecked or checked, run the function
 checker.onchange = function(){
if(this.checked){
    sendbtn.disabled = false;
} else {
    sendbtn.disabled = true;
}


}

function myFunc() {
                    alert("You have succesfully completed filling in the form. Check your email for submit confirmation.");
                  }

  </script>
    <br><br>
  </div>

  <br><br>
  

 




       <!--jQuery and Bootstrap Bundle (includes Popper) -->
   <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
   <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-Piv4xVNRyMGpqkS2by6br4gNJ7DXjqk09RmUpJ8jgGtD7zP9yug3goQfGII0yAns" crossorigin="anonymous"></script>
   <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js" integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3" crossorigin="anonymous"></script>
    </body>
  </html>


